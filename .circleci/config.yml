version: 2.1

jobs:
  archlinux:
    docker:
      - image: archlinux/base:latest
    steps:
      - checkout
      - run:
          name: Install dependencies
          command: |
            pacman -Syu --noconfirm base-devel fuse3 poco boost
      - run:
          name: Configure
          command: |
            sh autogen.sh
            ./configure
      - run:
          name: Build
          command: |
            make -j
      - run:
          name: Install
          command: |
            make install

workflows:
  main:
    jobs:
      - archlinux
